[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< uk.gov.pay:pay-connector >----------------------
[INFO] Building pay-connector 0.1-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-openjdk8-server/9.4.44.v20210927/jetty-alpn-openjdk8-server-9.4.44.v20210927.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-java-server/9.4.44.v20210927/jetty-alpn-java-server-9.4.44.v20210927.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/com/github/tomakehurst/wiremock-jre8/2.32.0/wiremock-jre8-2.32.0.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/net/bytebuddy/byte-buddy/1.12.5/byte-buddy-1.12.5.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-server/9.4.44.v20210927/jetty-alpn-server-9.4.44.v20210927.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/com/github/tomakehurst/wiremock-jre8/2.32.0/wiremock-jre8-2.32.0.jar (0 B at 0 B/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-openjdk8-server/9.4.44.v20210927/jetty-alpn-openjdk8-server-9.4.44.v20210927.jar (0 B at 0 B/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-java-server/9.4.44.v20210927/jetty-alpn-java-server-9.4.44.v20210927.jar (0 B at 0 B/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-server/9.4.44.v20210927/jetty-alpn-server-9.4.44.v20210927.jar (0 B at 0 B/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/dropwizard/dropwizard-testing/2.0.28/dropwizard-testing-2.0.28.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/xmlunit/xmlunit-placeholders/2.8.3/xmlunit-placeholders-2.8.3.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-openjdk8-client/9.4.44.v20210927/jetty-alpn-openjdk8-client-9.4.44.v20210927.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/rest-assured/rest-assured/4.5.0/rest-assured-4.5.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-alpn-openjdk8-client/9.4.44.v20210927/jetty-alpn-openjdk8-client-9.4.44.v20210927.jar (0 B at 0 B/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/rest-assured/json-path/4.5.0/json-path-4.5.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/xmlunit/xmlunit-placeholders/2.8.3/xmlunit-placeholders-2.8.3.jar (0 B at 0 B/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/rest-assured/rest-assured-common/4.5.0/rest-assured-common-4.5.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/rest-assured/json-path/4.5.0/json-path-4.5.0.jar (67 kB at 219 kB/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/rest-assured/rest-assured-common/4.5.0/rest-assured-common-4.5.0.jar (42 kB at 139 kB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/rest-assured/xml-path/4.5.0/xml-path-4.5.0.jar
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/uk/gov/service/payments/testing/1.0.20220131093232/testing-1.0.20220131093232.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/rest-assured/xml-path/4.5.0/xml-path-4.5.0.jar (80 kB at 240 kB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/dropwizard/dropwizard-jdbi3/2.0.28/dropwizard-jdbi3-2.0.28.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/dropwizard/dropwizard-jdbi3/2.0.28/dropwizard-jdbi3-2.0.28.jar (10 kB at 30 kB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-core/3.25.0/jdbi3-core-3.25.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/rest-assured/rest-assured/4.5.0/rest-assured-4.5.0.jar (702 kB at 1.9 MB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-sqlobject/3.25.0/jdbi3-sqlobject-3.25.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/dropwizard/dropwizard-testing/2.0.28/dropwizard-testing-2.0.28.jar (62 kB at 158 kB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-jodatime2/3.25.0/jdbi3-jodatime2-3.25.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-core/3.25.0/jdbi3-core-3.25.0.jar (538 kB at 1.4 MB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-guava/3.25.0/jdbi3-guava-3.25.0.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-guava/3.25.0/jdbi3-guava-3.25.0.jar (12 kB at 30 kB/s)
[INFO] Downloading from central: https://repo.maven.apache.org/maven2/io/dropwizard/metrics/metrics-jdbi3/4.1.29/metrics-jdbi3-4.1.29.jar
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/net/bytebuddy/byte-buddy/1.12.5/byte-buddy-1.12.5.jar (3.8 MB at 7.9 MB/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-sqlobject/3.25.0/jdbi3-sqlobject-3.25.0.jar (214 kB at 453 kB/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/uk/gov/service/payments/testing/1.0.20220131093232/testing-1.0.20220131093232.jar (18 kB at 37 kB/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/io/dropwizard/metrics/metrics-jdbi3/4.1.29/metrics-jdbi3-4.1.29.jar (13 kB at 26 kB/s)
[INFO] Downloaded from central: https://repo.maven.apache.org/maven2/org/jdbi/jdbi3-jodatime2/3.25.0/jdbi3-jodatime2-3.25.0.jar (5.4 kB at 11 kB/s)
[INFO] 
[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ pay-connector ---
[INFO] Deleting /home/gabsko/breaking-updates/target
[INFO] 
[INFO] --- maven-resources-plugin:3.2.0:copy-resources (copy-resources) @ pay-connector ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ pay-connector ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] Copying 24 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.9.0:compile (default-compile) @ pay-connector ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 652 source files to /home/gabsko/breaking-updates/target/classes
[INFO] /home/gabsko/breaking-updates/src/main/java/uk/gov/pay/connector/gateway/ClientFactory.java: Some input files use or override a deprecated API.
[INFO] /home/gabsko/breaking-updates/src/main/java/uk/gov/pay/connector/gateway/ClientFactory.java: Recompile with -Xlint:deprecation for details.
[INFO] /home/gabsko/breaking-updates/src/main/java/uk/gov/pay/connector/events/model/EventFactory.java: Some input files use unchecked or unsafe operations.
[INFO] /home/gabsko/breaking-updates/src/main/java/uk/gov/pay/connector/events/model/EventFactory.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ pay-connector ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] Copying 160 resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.9.0:testCompile (default-testCompile) @ pay-connector ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 390 source files to /home/gabsko/breaking-updates/target/test-classes
[INFO] /home/gabsko/breaking-updates/src/test/java/uk/gov/pay/connector/model/domain/EmailCollectionModeTest.java: Some input files use or override a deprecated API.
[INFO] /home/gabsko/breaking-updates/src/test/java/uk/gov/pay/connector/model/domain/EmailCollectionModeTest.java: Recompile with -Xlint:deprecation for details.
[INFO] /home/gabsko/breaking-updates/src/test/java/uk/gov/pay/connector/util/DatabaseTestHelper.java: Some input files use unchecked or unsafe operations.
[INFO] /home/gabsko/breaking-updates/src/test/java/uk/gov/pay/connector/util/DatabaseTestHelper.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ pay-connector ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayRefundHandlerTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.619 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayRefundHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayAuthorisationRequestSummaryTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.308 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayAuthorisationRequestSummaryTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayCredentialsValidationServiceTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.361 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayCredentialsValidationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayOrderStatusResponseTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.042 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayOrderStatusResponseTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayNotificationServiceTest
[Fatal Error] :1:8: The element type "not" must be terminated by the matching end-tag "</not>".
[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.204 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayNotificationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.Worldpay3dsFlexCredentialsValidationServiceTest
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.256 s - in uk.gov.pay.connector.gateway.worldpay.Worldpay3dsFlexCredentialsValidationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayPaymentProviderTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.573 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayPaymentProviderTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayAuthoriseHandlerTest
[INFO] Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.687 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayAuthoriseHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.util.AuthorisationRequestSummaryStringifierTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.gateway.util.AuthorisationRequestSummaryStringifierTest
[INFO] Running uk.gov.pay.connector.gateway.util.AuthorisationRequestSummaryStructuredLoggingTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.gateway.util.AuthorisationRequestSummaryStructuredLoggingTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayNotificationServiceTest
[ERROR] WARNING: An illegal reflective access operation has occurred
[ERROR] WARNING: Illegal reflective access by com.fasterxml.jackson.databind.util.ClassUtil (file:/home/gabsko/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.1/jackson-databind-2.13.1.jar) to constructor java.util.Optional()
[ERROR] WARNING: Please consider reporting this to the maintainers of com.fasterxml.jackson.databind.util.ClassUtil
[ERROR] WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
[ERROR] WARNING: All illegal access operations will be denied in a future release
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.116 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayNotificationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayAuthorisationRequestSummaryTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayAuthorisationRequestSummaryTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.handler.StripeFailedPaymentFeeCollectionHandlerTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.074 s - in uk.gov.pay.connector.gateway.stripe.handler.StripeFailedPaymentFeeCollectionHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeNotificationServiceTest
[INFO] Tests run: 23, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.159 s - in uk.gov.pay.connector.gateway.stripe.StripeNotificationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeAuthorisationRequestSummaryTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.gateway.stripe.StripeAuthorisationRequestSummaryTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeRequestTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.05 s - in uk.gov.pay.connector.gateway.stripe.request.StripeRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeTransferMetadataReasonTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.gateway.stripe.request.StripeTransferMetadataReasonTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqAuthorisationRequestSummaryTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.gateway.epdq.EpdqAuthorisationRequestSummaryTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqNotificationServiceStatusMapperTest
[INFO] Tests run: 30, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.064 s - in uk.gov.pay.connector.gateway.epdq.EpdqNotificationServiceStatusMapperTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqNotificationServiceTest
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in uk.gov.pay.connector.gateway.epdq.EpdqNotificationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.SandboxNotificationServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.sandbox.SandboxNotificationServiceTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.SandboxAuthorisationRequestSummaryTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.sandbox.SandboxAuthorisationRequestSummaryTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.SandboxPaymentProviderTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.gateway.sandbox.SandboxPaymentProviderTest
[INFO] Running uk.gov.pay.connector.gatewayaccountcredentials.resource.GatewayAccountCredentialsResourceTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.898 s - in uk.gov.pay.connector.gatewayaccountcredentials.resource.GatewayAccountCredentialsResourceTest
[INFO] Running uk.gov.pay.connector.gatewayaccountcredentials.service.GatewayAccountCredentialsServiceTest
ERROR [2023-01-13 13:48:42,181] uk.gov.pay.connector.util.ResponseUtil: [Multiple usable credentials exist for payment provider [%s], unable to determine which to use.]
WARN  [2023-01-13 13:48:42,186] uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntity: Gateway account [id=1] has multiple credentials but no active credential found
[INFO] Tests run: 37, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.053 s - in uk.gov.pay.connector.gatewayaccountcredentials.service.GatewayAccountCredentialsServiceTest
[INFO] Running uk.gov.pay.connector.charge.model.domain.FeeTypeConverterTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.charge.model.domain.FeeTypeConverterTest
[INFO] Running uk.gov.pay.connector.charge.model.SourceDeserialiserTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.138 s - in uk.gov.pay.connector.charge.model.SourceDeserialiserTest
[INFO] Running uk.gov.pay.connector.charge.resource.ChargesFrontendResourceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.116 s - in uk.gov.pay.connector.charge.resource.ChargesFrontendResourceTest
[INFO] Running uk.gov.pay.connector.charge.util.FixedCorporateCardSurchargeCalculatorTest
[INFO] Tests run: 24, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s - in uk.gov.pay.connector.charge.util.FixedCorporateCardSurchargeCalculatorTest
[INFO] Running uk.gov.pay.connector.charge.util.StripeFeeCalculatorTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.charge.util.StripeFeeCalculatorTest
[INFO] Running uk.gov.pay.connector.charge.util.RefundCalculatorTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.charge.util.RefundCalculatorTest
[INFO] Running uk.gov.pay.connector.charge.util.CorporateCardSurchargeCalculatorTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.charge.util.CorporateCardSurchargeCalculatorTest
[INFO] Running uk.gov.pay.connector.service.GatewayAccountServiceTest
[INFO] Tests run: 35, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.103 s - in uk.gov.pay.connector.service.GatewayAccountServiceTest
[INFO] Running uk.gov.pay.connector.service.RefundServiceTest
WARN  [2023-01-13 13:48:42,673] uk.gov.pay.connector.refund.service.RefundService: Charge not available for refund - charge_external_id=chargeId, status=EXTERNAL_SUBMITTED, refund_status=unavailable, account_id=2, operation_type=Refund, provider=sandbox, provider_type=test
[INFO] Tests run: 20, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 s - in uk.gov.pay.connector.service.RefundServiceTest
[INFO] Running uk.gov.pay.connector.service.GatewayClientTest
WARN  [2023-01-13 13:48:42,696] uk.gov.pay.connector.gateway.GatewayClient: Exception for gateway url=http://www.example.com/worldpay/order, error message: java.net.SocketException: socket failed
! java.net.SocketException: socket failed
! at uk.gov.pay.connector.service.GatewayClientTest.shouldReturnGatewayErrorWhenProviderFailsWithAProcessingException(GatewayClientTest.java:91)
! ... 70 common frames omitted
! Causing: javax.ws.rs.ProcessingException: java.net.SocketException: socket failed
! at uk.gov.pay.connector.gateway.GatewayClient.lambda$postRequestFor$2(GatewayClient.java:72)
! at uk.gov.pay.connector.gateway.GatewayClient.executeRequest(GatewayClient.java:115)
! at uk.gov.pay.connector.gateway.GatewayClient.postRequestFor(GatewayClient.java:75)
! at uk.gov.pay.connector.gateway.GatewayClient.postRequestFor(GatewayClient.java:48)
! at uk.gov.pay.connector.service.GatewayClientTest.lambda$shouldReturnGatewayErrorWhenProviderFailsWithAProcessingException$2(GatewayClientTest.java:96)
! at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:55)
! at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:37)
! at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3082)
! at uk.gov.pay.connector.service.GatewayClientTest.shouldReturnGatewayErrorWhenProviderFailsWithAProcessingException(GatewayClientTest.java:95)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
! at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
! at java.base/java.lang.reflect.Method.invoke(Method.java:566)
! at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
! at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
! at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
! at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
! at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
! at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
! at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
! at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
! at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
! at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
! at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
! at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
! at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
! at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
WARN  [2023-01-13 13:48:42,700] uk.gov.pay.connector.gateway.GatewayClient: Exception for gateway url=http://www.example.com/worldpay/order, error message: java.net.SocketException: socket failed
! java.net.SocketException: socket failed
! at uk.gov.pay.connector.service.GatewayClientTest.getRequestShouldReturnGatewayErrorWhenProviderFailsWithAProcessingException(GatewayClientTest.java:131)
! ... 70 common frames omitted
! Causing: javax.ws.rs.ProcessingException: java.net.SocketException: socket failed
! at uk.gov.pay.connector.gateway.GatewayClient.lambda$getRequestFor$5(GatewayClient.java:99)
! at uk.gov.pay.connector.gateway.GatewayClient.executeRequest(GatewayClient.java:115)
! at uk.gov.pay.connector.gateway.GatewayClient.getRequestFor(GatewayClient.java:102)
! at uk.gov.pay.connector.service.GatewayClientTest.lambda$getRequestShouldReturnGatewayErrorWhenProviderFailsWithAProcessingException$5(GatewayClientTest.java:134)
! at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:55)
! at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:37)
! at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3082)
! at uk.gov.pay.connector.service.GatewayClientTest.getRequestShouldReturnGatewayErrorWhenProviderFailsWithAProcessingException(GatewayClientTest.java:133)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
! at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
! at java.base/java.lang.reflect.Method.invoke(Method.java:566)
! at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
! at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
! at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
! at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)
! at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)
! at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
! at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
! at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
! at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
! at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
! at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
! at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
! at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
! at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
! at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
! at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
! at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
! at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
! at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
! at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
! at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
WARN  [2023-01-13 13:48:42,702] uk.gov.pay.connector.gateway.GatewayClient: Gateway returned unexpected status code: 500, for gateway url=http://www.example.com/worldpay/order with type test with order request type authorise
WARN  [2023-01-13 13:48:42,706] uk.gov.pay.connector.gateway.GatewayClient: Gateway returned unexpected status code: 500, for gateway url=http://www.example.com/worldpay/order with type test with order request type query
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.017 s - in uk.gov.pay.connector.service.GatewayClientTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.model.GatewayAccountResourceDTOTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gatewayaccount.model.GatewayAccountResourceDTOTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntityTest
WARN  [2023-01-13 13:48:42,716] uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntity: Gateway account [id=1] has multiple credentials but no active credential found
WARN  [2023-01-13 13:48:42,720] uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntity: Gateway account [id=1] has multiple credentials but no active credential found
WARN  [2023-01-13 13:48:42,722] uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntity: Gateway account [id=1] has multiple credentials but no active credential found
[INFO] Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 s - in uk.gov.pay.connector.gatewayaccount.model.GatewayAccountEntityTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResourceSwitchPspValidationTest
ERROR [2023-01-13 13:48:42,830] uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResource: Switching Payment Provider failure: Account credential with id [b5e150a8eb594e7cab1fbfdf8ce5ba79] not found.
ERROR [2023-01-13 13:48:42,832] uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResource: Switching Payment Provider failure: Account has no credential to switch to/from
ERROR [2023-01-13 13:48:42,837] uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResource: Switching Payment Provider failure: Credential with id [4230098109b441ddb37579a719208787] is not in correct state.
ERROR [2023-01-13 13:48:42,840] uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResource: Switching Payment Provider failure: Account credential with ACTIVE state not found.
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.109 s - in uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResourceSwitchPspValidationTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountRequestValidatorTest
[INFO] Tests run: 53, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.05 s - in uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountRequestValidatorTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResourceValidationTest
ERROR [2023-01-13 13:48:42,998] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Value [false] must be of type boolean for path [allow_zero_amount]
ERROR [2023-01-13 13:48:43,024] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Operation [add] is not valid for path [corporate_debit_card_surcharge_amount]
ERROR [2023-01-13 13:48:43,025] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Value [] is not valid for path [corporate_credit_card_surcharge_amount]
ERROR [2023-01-13 13:48:43,026] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Value [-100] is not valid for path [corporate_credit_card_surcharge_amount]
ERROR [2023-01-13 13:48:43,028] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Field [value] is required
ERROR [2023-01-13 13:48:43,029] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Value [not zero or a positive number that can be represented as a long] is not valid for path [corporate_debit_card_surcharge_amount]
ERROR [2023-01-13 13:48:43,030] uk.gov.pay.connector.common.exception.ValidationExceptionMapper: Field [value] is required
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.137 s - in uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountResourceValidationTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.validation.Worldpay3DsFlexIssuerOrOrganisationalUnitIdValidatorTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.gatewayaccount.validation.Worldpay3DsFlexIssuerOrOrganisationalUnitIdValidatorTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.validation.Worldpay3dsFlexJwtMacKeyValidatorTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.gatewayaccount.validation.Worldpay3dsFlexJwtMacKeyValidatorTest
[INFO] Running uk.gov.pay.connector.events.model.charge.PaymentNotificationCreatedTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.055 s - in uk.gov.pay.connector.events.model.charge.PaymentNotificationCreatedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.Gateway3dsExemptionResultObtainedTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.events.model.charge.Gateway3dsExemptionResultObtainedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.FeeIncurredEventTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 s - in uk.gov.pay.connector.events.model.charge.FeeIncurredEventTest
[INFO] Running uk.gov.pay.connector.events.model.charge.Gateway3dsInfoObtainedTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.events.model.charge.Gateway3dsInfoObtainedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.PaymentCreatedTest
[INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.081 s - in uk.gov.pay.connector.events.model.charge.PaymentCreatedTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.QueryServiceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.paymentprocessor.service.QueryServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.WorldpayCardAuthoriseServiceTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.076 s - in uk.gov.pay.connector.paymentprocessor.service.WorldpayCardAuthoriseServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.DiscrepancyServiceTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 s - in uk.gov.pay.connector.paymentprocessor.service.DiscrepancyServiceTest
[INFO] Running uk.gov.pay.connector.util.CidrUtilsTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.util.CidrUtilsTest
[INFO] Running uk.gov.pay.connector.util.IpAddressMatcherTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.util.IpAddressMatcherTest
[INFO] Running uk.gov.pay.connector.queue.tasks.TaskQueueServiceTest
ERROR [2023-01-13 13:48:43,355] uk.gov.pay.connector.queue.tasks.TaskQueueService: Error adding payment task message to queue
[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.034 s - in uk.gov.pay.connector.queue.tasks.TaskQueueServiceTest
[INFO] Running uk.gov.pay.connector.queue.tasks.TaskQueueMessageHandlerTest
ERROR [2023-01-13 13:48:43,370] uk.gov.pay.connector.queue.tasks.TaskQueueMessageHandler: Task [unknown-task-name] is not supported
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 s - in uk.gov.pay.connector.queue.tasks.TaskQueueMessageHandlerTest
[INFO] Running uk.gov.pay.connector.queue.tasks.TaskQueueTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.03 s - in uk.gov.pay.connector.queue.tasks.TaskQueueTest
[INFO] Running uk.gov.pay.connector.queue.tasks.CollectFeesForFailedPaymentsTaskHandlerTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 s - in uk.gov.pay.connector.queue.tasks.CollectFeesForFailedPaymentsTaskHandlerTest
[INFO] Running uk.gov.pay.connector.wallets.applepay.ApplePayDecrypterTest
ERROR [2023-01-13 13:48:43,505] uk.gov.pay.connector.wallets.applepay.ApplePayDecrypter: Error while trying to decrypt apple pay payload: Tag mismatch!
ERROR [2023-01-13 13:48:43,509] uk.gov.pay.connector.wallets.applepay.ApplePayDecrypter: Error while trying to decrypt apple pay payload: java.security.InvalidKeyException: IOException: DerInputStream.getLength(): lengthTag=10, too big.
ERROR [2023-01-13 13:48:43,543] uk.gov.pay.connector.wallets.applepay.ApplePayDecrypter: Error while trying to decrypt apple pay payload: Input too short - need tag
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.122 s - in uk.gov.pay.connector.wallets.applepay.ApplePayDecrypterTest
[INFO] Running uk.gov.pay.connector.it.resources.ChargesApiResourceTest
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.087 s - in uk.gov.pay.connector.it.resources.ChargesApiResourceTest
[INFO] Running uk.gov.pay.connector.it.resources.GatewayAccountResourceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.1 s - in uk.gov.pay.connector.it.resources.GatewayAccountResourceTest
[INFO] Running uk.gov.pay.connector.model.domain.EmailNotificationTypeTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 s - in uk.gov.pay.connector.model.domain.EmailNotificationTypeTest
[INFO] Running uk.gov.pay.connector.model.domain.RefundEntityTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.model.domain.RefundEntityTest
[INFO] Running uk.gov.pay.connector.model.domain.HistoryCustomizerTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.207 s - in uk.gov.pay.connector.model.domain.HistoryCustomizerTest
[INFO] Running uk.gov.pay.connector.model.domain.EmailCollectionModeTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.model.domain.EmailCollectionModeTest
[INFO] Running uk.gov.pay.connector.model.domain.JsonToMapConverterTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.model.domain.JsonToMapConverterTest
[INFO] Running uk.gov.pay.connector.model.domain.ChargeEntityTest
WARN  [2023-01-13 13:48:43,994] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state CREATED cannot proceed to CAPTURED [charge_external_id=hb6ietd6qiljna3orndt2pd4iv, charge_status=CAPTURED, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.model.domain.ChargeEntityTest
[INFO] Running uk.gov.pay.connector.model.domain.RefundStatusMapTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.model.domain.RefundStatusMapTest
[INFO] Running uk.gov.pay.connector.model.LastDigitsCardNumberTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.model.LastDigitsCardNumberTest
[INFO] Running uk.gov.pay.connector.model.TransactionEventTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.model.TransactionEventTest
[INFO] Running uk.gov.pay.connector.model.FirstDigitsCardNumberTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.model.FirstDigitsCardNumberTest
[INFO] Running uk.gov.pay.connector.model.RefundResponseTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.032 s - in uk.gov.pay.connector.model.RefundResponseTest
[INFO] Running uk.gov.pay.connector.client.ledger.service.LedgerServiceTest
ERROR [2023-01-13 13:48:44,048] uk.gov.pay.connector.client.ledger.service.LedgerService: Error processing response from ledger for payment refunds: gateway_account_id=152 payment_external_id=external-id
ERROR [2023-01-13 13:48:44,049] uk.gov.pay.connector.client.ledger.service.LedgerService: Received non-success status code for get refunds for payment from Ledger: gateway_account_id=152, payment_external_id=external-id
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.client.ledger.service.LedgerServiceTest
[INFO] Running uk.gov.pay.connector.client.ledger.service.LedgerServiceConsumerTest
WARN  [2023-01-13 13:48:44,956] au.com.dius.pact.model.matchingrules.MatchingRuleGroup: Unrecognised matcher value, defaulting to equality matching
WARN  [2023-01-13 13:48:44,957] au.com.dius.pact.model.matchingrules.MatchingRuleGroup: Unrecognised matcher value, defaulting to equality matching
WARN  [2023-01-13 13:48:46,294] au.com.dius.pact.model.matchingrules.MatchingRuleGroup: Unrecognised matcher value, defaulting to equality matching
WARN  [2023-01-13 13:48:46,294] au.com.dius.pact.model.matchingrules.MatchingRuleGroup: Unrecognised matcher value, defaulting to equality matching
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.953 s - in uk.gov.pay.connector.client.ledger.service.LedgerServiceConsumerTest
[INFO] Running uk.gov.pay.connector.gateway.model.response.GatewayResponseTest
[WARNING] Tests run: 4, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.model.response.GatewayResponseTest
[INFO] Running uk.gov.pay.connector.gateway.model.request.CardAuthorisationGatewayRequestTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.gateway.model.request.CardAuthorisationGatewayRequestTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayCaptureHandlerTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayCaptureHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.WorldpayOrderRequestBuilderTest
[INFO] Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.644 s - in uk.gov.pay.connector.gateway.worldpay.WorldpayOrderRequestBuilderTest
[INFO] Running uk.gov.pay.connector.gateway.worldpay.wallets.WorldpayWalletAuthorisationHandlerTest
[ERROR] Tests run: 14, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 129.878 s <<< FAILURE! - in uk.gov.pay.connector.gateway.worldpay.wallets.WorldpayWalletAuthorisationHandlerTest
[ERROR] uk.gov.pay.connector.gateway.worldpay.wallets.WorldpayWalletAuthorisationHandlerTest.shouldSendGooglePay3dsRequestWithEmailWhenSendingPayerEmailToGatewayEnabledAndPayerEmailNotPresent  Time elapsed: 129.372 s  <<< ERROR!
java.net.ConnectException: Connection timed out (Connection timed out)
	at uk.gov.pay.connector.gateway.worldpay.wallets.WorldpayWalletAuthorisationHandlerTest.shouldSendGooglePay3dsRequestWithEmailWhenSendingPayerEmailToGatewayEnabledAndPayerEmailNotPresent(WorldpayWalletAuthorisationHandlerTest.java:295)

[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayOrderRequestBuilderTest
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.066 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayOrderRequestBuilderTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayStatusMapperTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayStatusMapperTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayPaymentProviderTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.044 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayPaymentProviderTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.auth.SmartpayAccountSpecificAuthenticatorTest
WARN  [2023-01-13 13:50:57,746] uk.gov.pay.connector.gateway.smartpay.auth.SmartpayAccountSpecificAuthenticator: Authentication failure: failed for smartpay username BasicCredentials{username=MyService, password=**********}
WARN  [2023-01-13 13:50:57,747] uk.gov.pay.connector.gateway.smartpay.auth.SmartpayAccountSpecificAuthenticator: Authentication failure: failed for smartpay username BasicCredentials{username=MyService, password=**********}
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.017 s - in uk.gov.pay.connector.gateway.smartpay.auth.SmartpayAccountSpecificAuthenticatorTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayCaptureHandlerTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayCaptureHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.smartpay.SmartpayNotificationTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.gateway.smartpay.SmartpayNotificationTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeCaptureHandlerTest
WARN  [2023-01-13 13:50:57,782] uk.gov.pay.connector.gateway.stripe.handler.StripeCaptureHandler: Capture failed for transaction id ch_1231231123123. Reason: uh oh. Status code from Stripe: Optional[500]. Charge External Id: hejo7ce1nhhhl4pai1qi32mqjs
WARN  [2023-01-13 13:50:57,794] uk.gov.pay.connector.gateway.stripe.handler.StripeCaptureHandler: Capture failed for transaction id ch_1231231123123. Reason: uh oh. Status code from Stripe: Optional[500]. Charge External Id: 71gntju4kr06oepsljjhgj0tqb
WARN  [2023-01-13 13:50:57,799] uk.gov.pay.connector.gateway.stripe.handler.StripeCaptureHandler: Capture failed for transaction id ch_1231231123123. Failure code from Stripe: resource_missing, failure message from Stripe: No such charge: ch_123456 or something similar. External Charge id: o1mts7ams24j9udo3nc6cm4cpj. Response code from Stripe: Optional[401]
WARN  [2023-01-13 13:50:57,814] uk.gov.pay.connector.gateway.stripe.handler.StripeCaptureHandler: Capture failed for transaction id ch_1231231123123. Failure code from Stripe: resource_missing, failure message from Stripe: No such charge: ch_123456 or something similar. External Charge id: 7itnk8r5hv1qvcu3dlvrgjg943. Response code from Stripe: Optional[401]
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 s - in uk.gov.pay.connector.gateway.stripe.StripeCaptureHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripePaymentProviderTest
ERROR [2023-01-13 13:50:57,829] uk.gov.pay.connector.gateway.stripe.handler.StripeAuthoriseHandler: Authorisation failed for charge mq4ht90j2oir6am585afk58kml due to an internal error. Reason: server error. Status code from Stripe: 500.
ERROR [2023-01-13 13:50:57,852] uk.gov.pay.connector.gateway.stripe.handler.StripeAuthoriseHandler: GatewayException occurred for charge external id mq4ht90j2oir6am585afk58kml, error:
 {}
! uk.gov.pay.connector.gateway.GatewayException$GatewayConnectionTimeoutException: javax.ws.rs.ProcessingException: java.io.IOException
! at uk.gov.pay.connector.gateway.stripe.handler.StripeAuthoriseHandler.createPaymentIntent(StripeAuthoriseHandler.java:92)
! at uk.gov.pay.connector.gateway.stripe.handler.StripeAuthoriseHandler.authorise(StripeAuthoriseHandler.java:56)
! at uk.gov.pay.connector.gateway.stripe.StripePaymentProvider.authorise(StripePaymentProvider.java:104)
! at uk.gov.pay.connector.gateway.stripe.StripePaymentProviderTest.shouldNotAuthorise_whenProcessingExceptionIsThrown(StripePaymentProviderTest.java:169)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
! at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
! at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
! at java.base/java.lang.reflect.Method.invoke(Method.java:566)
! at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
! at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
! at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
! at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
! at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
! at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
! at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
! at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
! at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
! at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
! at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
! at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
! at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
! at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
! at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
! at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
! at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
! at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
! at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
! at org.junit.vintage.engine.execution.RunnerExecutor.execute(RunnerExecutor.java:42)
! at org.junit.vintage.engine.VintageTestEngine.executeAllChildren(VintageTestEngine.java:80)
! at org.junit.vintage.engine.VintageTestEngine.execute(VintageTestEngine.java:72)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
! at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
! at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
! at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
! at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
! at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:128)
! at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
! at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
! at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
! at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.038 s - in uk.gov.pay.connector.gateway.stripe.StripePaymentProviderTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.json.StripePayoutStatusTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.gateway.stripe.json.StripePayoutStatusTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.json.StripePayoutTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.stripe.json.StripePayoutTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeCancelHandlerTest
ERROR [2023-01-13 13:50:57,869] uk.gov.pay.connector.gateway.stripe.handler.StripeCancelHandler: Cancel failed for gateway transaction id ch_1231231123123. Failure message from Stripe: stripe server error. Charge External Id: citm8s3o0q5gp306fp223j4rf0. Response code from Stripe: Optional[503]
ERROR [2023-01-13 13:50:57,870] uk.gov.pay.connector.gateway.stripe.handler.StripeCancelHandler: Cancel failed for gateway transaction id ch_1231231123123. Failure message from Stripe: {
  "error": {
    "charge": "ch_aaaaaaaaaaaaaaaaaaaaaaaa",
    "code": "resource_missing",
    "decline_code": "generic_decline",
    "doc_url": "https://stripe.com/docs/error-codes/card-declined",
    "message": "No such charge: ch_123456 or something similar",
    "type": "{{type}}",
    "payment_intent": {
      "id": "pi_aaaaaaaaaaaaaaaaaaaaaaaa",
      "object": "payment_intent",
      "amount": 12000,
      "amount_capturable": 0,
      "charges": {
        "object": "list",
        "data": [
          {
            "id": "ch_aaaaaaaaaaaaaaaaaaaaaaaa",
            "object": "charge",
            "amount": 12000,
            "amount_captured": 0,
            "amount_refunded": 0,
            "application": null,
            "application_fee": null,
            "application_fee_amount": null,
            "balance_transaction": null,
            "billing_details": {
              "address": {
                "city": "Manchester",
                "country": "GB",
                "line1": "Floor 1A City Tower",
                "line2": "Piccadilly Plaza",
                "postal_code": "M1 4BT",
                "state": null
              },
              "email": null,
              "name": "J. Bogs",
              "phone": null
            },
            "calculated_statement_descriptor": "Stripe",
            "captured": false,
            "created": 1641912339,
            "currency": "gbp",
            "customer": null,
            "description": "New passport application",
            "destination": null,
            "dispute": null,
            "disputed": false,
            "failure_code": "card_declined",
            "failure_message": "Your card was declined.",
            "fraud_details": {
            },
            "invoice": null,
            "livemode": false,
            "metadata": {
            },
            "on_behalf_of": "acct_aaaaaaaaaaaaaaaa",
            "order": null,
            "outcome": {
              "network_status": "declined_by_network",
              "reason": "generic_decline",
              "risk_level": "normal",
              "risk_score": 24,
              "seller_message": "The bank did not return any further details with this decline.",
              "type": "issuer_declined"
            },
            "paid": false,
            "payment_intent": "pi_aaaaaaaaaaaaaaaaaaaaaaaa",
            "payment_method": "pm_aaaaaaaaaaaaaaaaaaaaaaaa",
            "payment_method_details": {
              "card": {
                "brand": "visa",
                "checks": {
                  "address_line1_check": "pass",
                  "address_postal_code_check": "pass",
                  "cvc_check": "pass"
                },
                "country": "US",
                "exp_month": 2,
                "exp_year": 2023,
                "fingerprint": "0CFI1ogMdJ3zM4Ey",
                "funding": "credit",
                "installments": null,
                "last4": "0002",
                "network": "visa",
                "three_d_secure": null,
                "wallet": null
              },
              "type": "card"
            },
            "receipt_email": null,
            "receipt_number": null,
            "receipt_url": null,
            "refunded": false,
            "refunds": {
              "object": "list",
              "data": [
              ],
              "has_more": false,
              "total_count": 0,
              "url": "/v1/charges/ch_aaaaaaaaaaaaaaaaaaaaaaaa/refunds"
            },
            "review": null,
            "shipping": null,
            "source": null,
            "source_transfer": null,
            "statement_descriptor": null,
            "statement_descriptor_suffix": null,
            "status": "failed",
            "transfer_data": null
          }
        ]
      }
    }
  }
}. Charge External Id: jp0bukq5hpghapl1um8hbeeufg. Response code from Stripe: Optional[400]
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.gateway.stripe.StripeCancelHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeCaptureRequestTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.gateway.stripe.request.StripeCaptureRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripePaymentIntentRequestTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.gateway.stripe.request.StripePaymentIntentRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeTransferOutRequestTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.stripe.request.StripeTransferOutRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeTransferInRequestTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.gateway.stripe.request.StripeTransferInRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripePaymentMethodRequestTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.gateway.stripe.request.StripePaymentMethodRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeRefundRequestTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.stripe.request.StripeRefundRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeAuthoriseRequestTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.gateway.stripe.request.StripeAuthoriseRequestTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.request.StripeTransferMetadataTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.stripe.request.StripeTransferMetadataTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeRefundHandlerTest
ERROR [2023-01-13 13:50:57,924] uk.gov.pay.connector.gateway.stripe.handler.StripeRefundHandler: Refund failed for refund gateway request RefundGatewayRequest[
transactionId: gatewayTransactionId
refundExternalId: someExternalId]. Reason: Problem with Stripe servers. Status code from Stripe: Optional[500].
ERROR [2023-01-13 13:50:57,929] uk.gov.pay.connector.gateway.stripe.handler.StripeRefundHandler: Refund failed for refund gateway request RefundGatewayRequest[
transactionId: gatewayTransactionId
refundExternalId: someExternalId]. Failure code from Stripe: resource_missing, failure message from Stripe: No such charge: ch_123456 or something similar. Response code from Stripe: Optional[402]
ERROR [2023-01-13 13:50:57,932] uk.gov.pay.connector.gateway.stripe.handler.StripeRefundHandler: Refund failed for refund gateway request RefundGatewayRequest[
transactionId: gatewayTransactionId
refundExternalId: someExternalId]. Failure code from Stripe: resource_missing, failure message from Stripe: No such charge: ch_123456 or something similar. Response code from Stripe: Optional[402]
ERROR [2023-01-13 13:50:57,934] uk.gov.pay.connector.gateway.stripe.handler.StripeRefundHandler: Refund failed for refund gateway request RefundGatewayRequest[
transactionId: gatewayTransactionId
refundExternalId: someExternalId]. Reason: Problem with Stripe servers. Status code from Stripe: Optional[500].
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in uk.gov.pay.connector.gateway.stripe.StripeRefundHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.stripe.StripeNotificationTypeTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.gateway.stripe.StripeNotificationTypeTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForNewOrderTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForNewOrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForCancelOrderTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForCancelOrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForCaptureOrderTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForCaptureOrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqSha512SignatureGeneratorTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.epdq.EpdqSha512SignatureGeneratorTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForNew3dsOrderTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForNew3dsOrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.payload.EpdqPayloadDefinitionForNew3ds2OrderTest
[INFO] Tests run: 80, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.028 s - in uk.gov.pay.connector.gateway.epdq.payload.EpdqPayloadDefinitionForNew3ds2OrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqNotificationTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.epdq.EpdqNotificationTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForRefundOrderTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gateway.epdq.EpdqPayloadDefinitionForRefundOrderTest
[INFO] Running uk.gov.pay.connector.gateway.epdq.EpdqCaptureHandlerTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.095 s - in uk.gov.pay.connector.gateway.epdq.EpdqCaptureHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.applepay.SandboxWalletAuthorisationHandlerTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.sandbox.applepay.SandboxWalletAuthorisationHandlerTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.SandboxWalletCardNumbersTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.sandbox.SandboxWalletCardNumbersTest
[INFO] Running uk.gov.pay.connector.gateway.sandbox.SandboxCardNumbersTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gateway.sandbox.SandboxCardNumbersTest
[INFO] Running uk.gov.pay.connector.gateway.processor.ChargeNotificationProcessorTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 s - in uk.gov.pay.connector.gateway.processor.ChargeNotificationProcessorTest
[INFO] Running uk.gov.pay.connector.gateway.processor.RefundNotificationProcessorTest
WARN  [2023-01-13 13:50:58,136] uk.gov.pay.connector.gateway.processor.RefundNotificationProcessor: WORLDPAY refund notification could not be used to update charge [ksi8v2c9er7ii48rjof22sgegp] (missing reference)
WARN  [2023-01-13 13:50:58,137] uk.gov.pay.connector.gateway.processor.RefundNotificationProcessor: WORLDPAY notification could not be processed as refund [someExternalId] has been expunged from connector
WARN  [2023-01-13 13:50:58,138] uk.gov.pay.connector.gateway.processor.RefundNotificationProcessor: WORLDPAY notification 'unknown' could not be used to update refund (associated refund entity not found) for charge [9f5hun8pcqp4iv1n04md4hfc59]
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.gateway.processor.RefundNotificationProcessorTest
[INFO] Running uk.gov.pay.connector.gatewayaccountcredentials.resource.GatewayAccountCredentialsRequestValidatorTest
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 s - in uk.gov.pay.connector.gatewayaccountcredentials.resource.GatewayAccountCredentialsRequestValidatorTest
[INFO] Running uk.gov.pay.connector.payout.PayoutEmitterServiceTest
WARN  [2023-01-13 13:50:58,162] uk.gov.pay.connector.payout.PayoutEmitterService: Unsupported payout event class [class uk.gov.pay.connector.events.model.payout.PayoutEvent]
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.payout.PayoutEmitterServiceTest
[INFO] Running uk.gov.pay.connector.payout.PayoutReconcileProcessTest
ERROR [2023-01-13 13:50:58,321] uk.gov.pay.connector.payout.PayoutReconcileProcess: Error processing payout from SQS message [queueMessageId=null] [errorMessage=Transaction external ID missing in metadata on Stripe transfer for balance transaction [null] for payout [po_123dv3RPEC2XwBWpqiQfnJGQ] for gateway account [acct_2RDpWRLXEC2XwBWp]]
ERROR [2023-01-13 13:50:58,322] uk.gov.pay.connector.payout.PayoutReconcileProcess: No payments or refunds retrieved for payout [po_123dv3RPEC2XwBWpqiQfnJGQ]. Requires investigation.
ERROR [2023-01-13 13:50:58,325] uk.gov.pay.connector.payout.PayoutReconcileProcess: Error processing payout from SQS message [queueMessageId=null] [errorMessage=Error sending PAYMENT_INCLUDED_IN_PAYOUT event for transaction [payment-id] included in payout [po_123dv3RPEC2XwBWpqiQfnJGQ] to event queue: null]
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.163 s - in uk.gov.pay.connector.payout.PayoutReconcileProcessTest
[INFO] Running uk.gov.pay.connector.charge.model.ChargeCreateRequestTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.01 s - in uk.gov.pay.connector.charge.model.ChargeCreateRequestTest
[INFO] Running uk.gov.pay.connector.charge.validation.telephone.CardBrandValidatorTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 s - in uk.gov.pay.connector.charge.validation.telephone.CardBrandValidatorTest
[INFO] Running uk.gov.pay.connector.charge.validation.telephone.ZoneDateTimeValidatorTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s - in uk.gov.pay.connector.charge.validation.telephone.ZoneDateTimeValidatorTest
[INFO] Running uk.gov.pay.connector.charge.validation.telephone.PaymentOutcomeValidatorTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.charge.validation.telephone.PaymentOutcomeValidatorTest
[INFO] Running uk.gov.pay.connector.charge.validation.telephone.CardLastFourDigitsValidatorTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.charge.validation.telephone.CardLastFourDigitsValidatorTest
[INFO] Running uk.gov.pay.connector.charge.validation.telephone.CardFirstSixDigitsValidatorTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.charge.validation.telephone.CardFirstSixDigitsValidatorTest
[INFO] Running uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest
ERROR [2023-01-13 13:50:58,419] uk.gov.pay.connector.charge.service.ChargeExpiryService: Gateway error while cancelling the Charge - charge_external_id=eb0iocca6do01f0lm1oin1tb36, gateway_error=something went wrong
[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenStateIsPostAuthorisationAndCannotCheckStatusWithGateway (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenStateIsPostAuthorisationAndCannotCheckStatusWithGateway (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenCanCheckWithGatewayAndGatewayStatusIsNotTerminal (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenCanCheckWithGatewayAndGatewayStatusIsNotTerminal (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenCanCheckWithGatewayAndGatewayStatusIsNotTerminal (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldExpireWithGateway_whenCanCheckWithGatewayAndGatewayStatusIsNotTerminal (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[MockitoHint] ChargeExpiryServiceTest.shouldSweepAndExpireCharges (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest.mockExpiredChargeEntity(ChargeExpiryServiceTest.java:128)

[INFO] Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.047 s - in uk.gov.pay.connector.charge.service.ChargeExpiryServiceTest
[INFO] Running uk.gov.pay.connector.charge.service.EpdqAuthorisationErrorGatewayCleanupServiceTest
ERROR [2023-01-13 13:50:58,449] uk.gov.pay.connector.charge.service.EpdqAuthorisationErrorGatewayCleanupService: Charge is in a mapped status of [AUTHORISATION UNEXPECTED ERROR] with the gateway, which is unexpected and we do not handle. If the gateway status is CAPTURED, it suggests the service has incorrect gateway settings.
ERROR [2023-01-13 13:50:58,451] uk.gov.pay.connector.charge.service.EpdqAuthorisationErrorGatewayCleanupService: Charge does not map to an internal charge state. Raw query response was: mockQueryResponse
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in uk.gov.pay.connector.charge.service.EpdqAuthorisationErrorGatewayCleanupServiceTest
[INFO] Running uk.gov.pay.connector.charge.service.Worldpay3dsFlexJwtServiceTest
[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.045 s - in uk.gov.pay.connector.charge.service.Worldpay3dsFlexJwtServiceTest
[INFO] Running uk.gov.pay.connector.charge.service.ChargeCancelServiceTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.017 s - in uk.gov.pay.connector.charge.service.ChargeCancelServiceTest
[INFO] Running uk.gov.pay.connector.charge.service.ChargeServiceCreateTest
[INFO] Tests run: 51, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.122 s - in uk.gov.pay.connector.charge.service.ChargeServiceCreateTest
[INFO] Running uk.gov.pay.connector.charge.service.ChargeServiceFindTest
[MockitoHint] ChargeServiceFindTest.shouldFindChargeForChargeId_withFee (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.charge.service.ChargeServiceFindTest.shouldFindChargeForChargeId_withFee(ChargeServiceFindTest.java:168)

[INFO] Tests run: 35, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.041 s - in uk.gov.pay.connector.charge.service.ChargeServiceFindTest
[INFO] Running uk.gov.pay.connector.charge.service.ChargeServiceTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 s - in uk.gov.pay.connector.charge.service.ChargeServiceTest
[INFO] Running uk.gov.pay.connector.charge.util.JwtGeneratorTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.charge.util.JwtGeneratorTest
[INFO] Running uk.gov.pay.connector.service.UnknownStatusTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.service.UnknownStatusTest
[INFO] Running uk.gov.pay.connector.service.GatewayClientFactoryTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.service.GatewayClientFactoryTest
[INFO] Running uk.gov.pay.connector.service.IgnoredStatusTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.service.IgnoredStatusTest
[INFO] Running uk.gov.pay.connector.service.MappedChargeStatusTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.service.MappedChargeStatusTest
[INFO] Running uk.gov.pay.connector.service.EpdqExternalRefundAvailabilityCalculatorTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.service.EpdqExternalRefundAvailabilityCalculatorTest
[INFO] Running uk.gov.pay.connector.service.MappedRefundStatusTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.service.MappedRefundStatusTest
[INFO] Running uk.gov.pay.connector.service.PaymentProvidersTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.054 s - in uk.gov.pay.connector.service.PaymentProvidersTest
[INFO] Running uk.gov.pay.connector.service.DefaultExternalRefundAvailabilityCalculatorTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.service.DefaultExternalRefundAvailabilityCalculatorTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.model.GatewayAccountSearchParamsTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gatewayaccount.model.GatewayAccountSearchParamsTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountSwitchPaymentProviderRequestValidatorTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.gatewayaccount.resource.GatewayAccountSwitchPaymentProviderRequestValidatorTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.resource.StripeAccountSetupRequestValidatorTest
[INFO] Tests run: 38, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 s - in uk.gov.pay.connector.gatewayaccount.resource.StripeAccountSetupRequestValidatorTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.service.StripeAccountSetupServiceTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 s - in uk.gov.pay.connector.gatewayaccount.service.StripeAccountSetupServiceTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.service.GatewayAccountSwitchPaymentProviderServiceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.gatewayaccount.service.GatewayAccountSwitchPaymentProviderServiceTest
[INFO] Running uk.gov.pay.connector.gatewayaccount.service.StripeAccountServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.gatewayaccount.service.StripeAccountServiceTest
[INFO] Running uk.gov.pay.connector.events.model.EventTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.events.model.EventTest
[INFO] Running uk.gov.pay.connector.events.model.payout.PayoutUpdatedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.payout.PayoutUpdatedTest
[INFO] Running uk.gov.pay.connector.events.model.payout.PayoutPaidTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.payout.PayoutPaidTest
[INFO] Running uk.gov.pay.connector.events.model.payout.PayoutFailedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.payout.PayoutFailedTest
[INFO] Running uk.gov.pay.connector.events.model.payout.PayoutCreatedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.payout.PayoutCreatedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.UserEmailCollectedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.charge.UserEmailCollectedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.CaptureSubmittedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.charge.CaptureSubmittedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.BackfillerRecreatedUserEmailCollectedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.charge.BackfillerRecreatedUserEmailCollectedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.CancelledByUserTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.charge.CancelledByUserTest
[INFO] Running uk.gov.pay.connector.events.model.charge.PaymentDetailsEnteredTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.events.model.charge.PaymentDetailsEnteredTest
[INFO] Running uk.gov.pay.connector.events.model.charge.CaptureConfirmedTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.events.model.charge.CaptureConfirmedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.RefundAvailabilityUpdatedTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.charge.RefundAvailabilityUpdatedTest
[INFO] Running uk.gov.pay.connector.events.model.charge.PaymentIncludedInPayoutTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.charge.PaymentIncludedInPayoutTest
[INFO] Running uk.gov.pay.connector.events.model.charge.GatewayRequires3dsAuthorisationTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.charge.GatewayRequires3dsAuthorisationTest
[INFO] Running uk.gov.pay.connector.events.model.refund.EventFactoryTest
[INFO] Tests run: 31, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.05 s - in uk.gov.pay.connector.events.model.refund.EventFactoryTest
[INFO] Running uk.gov.pay.connector.events.model.refund.RefundIncludedInPayoutTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.events.model.refund.RefundIncludedInPayoutTest
[INFO] Running uk.gov.pay.connector.events.model.refund.RefundSucceededTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.refund.RefundSucceededTest
[INFO] Running uk.gov.pay.connector.events.model.refund.RefundCreatedByUserTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.events.model.refund.RefundCreatedByUserTest
[INFO] Running uk.gov.pay.connector.events.model.refund.RefundCreatedByServiceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.events.model.refund.RefundCreatedByServiceTest
[INFO] Running uk.gov.pay.connector.events.resource.EmittedEventResourceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.104 s - in uk.gov.pay.connector.events.resource.EmittedEventResourceTest
[INFO] Running uk.gov.pay.connector.events.EmittedEventsBackfillServiceTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.036 s - in uk.gov.pay.connector.events.EmittedEventsBackfillServiceTest
[INFO] Running uk.gov.pay.connector.events.EventQueueTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.events.EventQueueTest
[INFO] Running uk.gov.pay.connector.events.StateTransitionEmitterProcessTest
WARN  [2023-01-13 13:50:59,140] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,140] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,140] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,141] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,141] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,141] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,141] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,141] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,142] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
ERROR [2023-01-13 13:50:59,142] uk.gov.pay.connector.events.StateTransitionEmitterProcess: State transition message failed to process beyond max retries [eventId=100] [eventType=PaymentEvent]:
WARN  [2023-01-13 13:50:59,153] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
WARN  [2023-01-13 13:50:59,154] uk.gov.pay.connector.events.StateTransitionEmitterProcess: Failed to emit new event for state transition [eventId=100] [eventType=PaymentEvent] [error=null]
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.025 s - in uk.gov.pay.connector.events.StateTransitionEmitterProcessTest
[INFO] Running uk.gov.pay.connector.events.EventServiceTest
ERROR [2023-01-13 13:50:59,158] uk.gov.pay.connector.events.EventService: Failed to emit event PAYMENT_EVENT due to null [externalId=external-id]
ERROR [2023-01-13 13:50:59,159] uk.gov.pay.connector.events.EventService: Failed to emit event PAYMENT_EVENT due to null [externalId=external-id]
ERROR [2023-01-13 13:50:59,160] uk.gov.pay.connector.events.EventService: Failed to emit event PAYMENT_CREATED due to null [externalId=external-id]
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.events.EventServiceTest
[INFO] Running uk.gov.pay.connector.events.HistoricalEventEmitterServiceTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.124 s - in uk.gov.pay.connector.events.HistoricalEventEmitterServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.Card3dsResponseAuthServiceTest
WARN  [2023-01-13 13:50:59,304] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state AUTHORISATION READY cannot proceed to AUTHORISATION 3DS READY [charge_external_id=f3nldmjpjelek2gr6ei1pjahm2, charge_status=AUTHORISATION 3DS READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:50:59,305] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state AUTHORISATION 3DS READY cannot proceed to AUTHORISATION 3DS READY [charge_external_id=5rreojo23jp9a4aaktcebnmg92, charge_status=AUTHORISATION 3DS READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:50:59,310] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state EXPIRED cannot proceed to AUTHORISATION 3DS READY [charge_external_id=d1qbte2r1b1trdiu0um3pul77t, charge_status=AUTHORISATION 3DS READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
[INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.024 s - in uk.gov.pay.connector.paymentprocessor.service.Card3dsResponseAuthServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.CardCaptureServiceTest
ERROR [2023-01-13 13:50:59,320] uk.gov.pay.connector.paymentprocessor.service.CardCaptureService: CAPTURE_ERROR for charge [charge_external_id=external-id] - reached maximum number of capture attempts
WARN  [2023-01-13 13:50:59,329] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state CAPTURE READY cannot proceed to CAPTURE READY [charge_external_id=dogo6v690m2m1ka3amjjnvhopo, charge_status=CAPTURE READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
ERROR [2023-01-13 13:50:59,330] uk.gov.pay.connector.paymentprocessor.service.CardCaptureService: Exception sending charge [epb5ubikfmas4mqnjjh9cu3r81] to capture queue
WARN  [2023-01-13 13:50:59,334] uk.gov.pay.connector.paymentprocessor.service.CardCaptureService: Card capture response received with no transaction id. - charge_external_id=ece8pfdr39ipvoojj5e2umaibk
WARN  [2023-01-13 13:50:59,344] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state ENTERING CARD DETAILS cannot proceed to CAPTURE READY [charge_external_id=105tikoiil0qoce32on77715tu, charge_status=CAPTURE READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:50:59,345] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state CAPTURE READY cannot proceed to CAPTURE APPROVED [charge_external_id=a2gtr41801ionmnosji4idkbks, charge_status=CAPTURE APPROVED, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
ERROR [2023-01-13 13:50:59,346] uk.gov.pay.connector.paymentprocessor.service.CardCaptureService: CAPTURE_ERROR for charge [charge_external_id=rn38okaruk7qdpb46npsagvqca] - reached maximum number of capture attempts
[INFO] Tests run: 25, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.045 s - in uk.gov.pay.connector.paymentprocessor.service.CardCaptureServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.CardAuthoriseServiceTest
WARN  [2023-01-13 13:50:59,380] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=qsom53r8mrhoop2h7lj503iggq
WARN  [2023-01-13 13:50:59,382] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=glnep0j8b5gdgkru3d5a7km43u
WARN  [2023-01-13 13:50:59,384] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state CREATED cannot proceed to AUTHORISATION READY [charge_external_id=vsf9k96c2jivgrr10ic4r1vrrc, charge_status=AUTHORISATION READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:50:59,398] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state AUTHORISATION READY cannot proceed to AUTHORISATION READY [charge_external_id=2kf74lqdlcklgf40j7jmedsm6s, charge_status=AUTHORISATION READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:50:59,402] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=b4jc5m13ovn95ijl0b885h3q7b
WARN  [2023-01-13 13:50:59,412] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=i3l7b72iffmbk8r302kjd1j92g
ERROR [2023-01-13 13:50:59,416] uk.gov.pay.connector.paymentprocessor.service.CardAuthoriseService: AuthCardDetails authorisation failed pre operation. Card brand requires 3ds but Gateway account has 3ds disabled - charge_external_id=6p357ces8elvkkhnqmnu7ntko1, operation_type=Authorisation, card_brand=visa
WARN  [2023-01-13 13:50:59,417] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=9vcl9d2o8kms5cl5j2euld8jnh
WARN  [2023-01-13 13:50:59,421] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=2fd4dea18ob71olgj5cj9gsod3
[INFO] Tests run: 25, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.063 s - in uk.gov.pay.connector.paymentprocessor.service.CardAuthoriseServiceTest
[INFO] Running uk.gov.pay.connector.paymentprocessor.service.CardCaptureProcessTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.017 s - in uk.gov.pay.connector.paymentprocessor.service.CardCaptureProcessTest
[INFO] Running uk.gov.pay.connector.report.resource.ParityCheckerResourceTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.055 s - in uk.gov.pay.connector.report.resource.ParityCheckerResourceTest
[INFO] Running uk.gov.pay.connector.report.ParityCheckerServiceTest
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.027 s - in uk.gov.pay.connector.report.ParityCheckerServiceTest
[INFO] Running uk.gov.pay.connector.filters.SchemeRewriteFilterTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.filters.SchemeRewriteFilterTest
[INFO] Running uk.gov.pay.connector.app.RestClientFactoryTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.app.RestClientFactoryTest
[INFO] Running uk.gov.pay.connector.app.validator.SqsConfigValidatorTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 s - in uk.gov.pay.connector.app.validator.SqsConfigValidatorTest
[INFO] Running uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest
[MockitoHint] ChargeExpungeServiceTest.expunge_shouldNotExpungeCharge_ifIsTestStripePaymentMissingFees (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_shouldNotExpungeChargeIfInNonTerminalStateAndUpdateParityCheckStatusToSkipped (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_whenChargeMeetsTheConditions (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_shouldExpungeChargeIfInCaptureSubmittedAndChargeIsOlderThanHistoric (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldNotExpungeEpdqChargeWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldNotExpungeEpdqChargeWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldNotExpungeEpdqChargeWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_shouldExpungeNoOfChargesAsPerConfiguration (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldExpungeEpdqChargesWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldExpungeEpdqChargesWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldExpungeEpdqChargesWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.shouldExpungeEpdqChargesWithState (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_shouldNotExpungeChargesIfFeatureIsNotEnabled (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[MockitoHint] ChargeExpungeServiceTest.expunge_shouldNotExpungeChargeIfInCaptureSubmittedAndChargeIsNewerThanHistoric (see javadoc for MockitoHint):
[MockitoHint] 1. Unused -> at uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest.setUp(ChargeExpungeServiceTest.java:79)

[INFO] Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.028 s - in uk.gov.pay.connector.expunge.service.ChargeExpungeServiceTest
[INFO] Running uk.gov.pay.connector.expunge.service.ExpungeServiceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.expunge.service.ExpungeServiceTest
[INFO] Running uk.gov.pay.connector.expunge.service.RefundExpungeServiceTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.expunge.service.RefundExpungeServiceTest
[INFO] Running uk.gov.pay.connector.chargeevent.model.domain.LocalDateTimeConverterTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.chargeevent.model.domain.LocalDateTimeConverterTest
[INFO] Running uk.gov.pay.connector.northamericaregion.CanadaPostalcodeToProvinceOrTerritoryMapperTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.northamericaregion.CanadaPostalcodeToProvinceOrTerritoryMapperTest
[INFO] Running uk.gov.pay.connector.northamericaregion.UsZipCodeToStateMapperTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.northamericaregion.UsZipCodeToStateMapperTest
[INFO] Running uk.gov.pay.connector.northamericaregion.NorthAmericanRegionMapperTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.northamericaregion.NorthAmericanRegionMapperTest
[INFO] Running uk.gov.pay.connector.util.WorldpayXMLUnmarshallerTest
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.032 s - in uk.gov.pay.connector.util.WorldpayXMLUnmarshallerTest
[INFO] Running uk.gov.pay.connector.util.ReverseDnsLookupTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.886 s - in uk.gov.pay.connector.util.ReverseDnsLookupTest
[INFO] Running uk.gov.pay.connector.util.ApplicationStartupApplicationStartupDependentResourceCheckerTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.029 s - in uk.gov.pay.connector.util.ApplicationStartupApplicationStartupDependentResourceCheckerTest
[INFO] Running uk.gov.pay.connector.util.SmartpayXMLUnmarshallerTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.033 s - in uk.gov.pay.connector.util.SmartpayXMLUnmarshallerTest
[INFO] Running uk.gov.pay.connector.util.XMLUnmarshallerSecurityTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.022 s - in uk.gov.pay.connector.util.XMLUnmarshallerSecurityTest
[INFO] Running uk.gov.pay.connector.util.JsonObjectMapperTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.util.JsonObjectMapperTest
[INFO] Running uk.gov.pay.connector.util.DnsPointerResourceRecordTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.util.DnsPointerResourceRecordTest
[INFO] Running uk.gov.pay.connector.util.IpDomainMatcherTest
ERROR [2023-01-13 13:51:01,626] uk.gov.pay.connector.util.IpDomainMatcher: Reverse DNS Lookup failed: Host not found for ip address 'not-an-ip'
ERROR [2023-01-13 13:51:01,626] uk.gov.pay.connector.util.IpDomainMatcher: Reverse DNS Lookup failed: null
ERROR [2023-01-13 13:51:01,628] uk.gov.pay.connector.util.IpDomainMatcher: Reverse DNS lookup on ip '8.8.8.8' - resolved domain 'dns.google.' does not match 'worldpay.com'
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.util.IpDomainMatcherTest
[INFO] Running uk.gov.pay.connector.util.RandomIdGeneratorTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.025 s - in uk.gov.pay.connector.util.RandomIdGeneratorTest
[INFO] Running uk.gov.pay.connector.util.DateTimeUtilsTest
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 s - in uk.gov.pay.connector.util.DateTimeUtilsTest
[INFO] Running uk.gov.pay.connector.util.EpdqXMLUnmarshallerTest
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.039 s - in uk.gov.pay.connector.util.EpdqXMLUnmarshallerTest
[INFO] Running uk.gov.pay.connector.common.model.domain.PrefilledAddressTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.common.model.domain.PrefilledAddressTest
[INFO] Running uk.gov.pay.connector.common.model.domain.PaymentGatewayStateTransitionsTest
[INFO] Tests run: 41, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.common.model.domain.PaymentGatewayStateTransitionsTest
[INFO] Running uk.gov.pay.connector.common.model.domain.NumbersInStringsSanitizerTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.common.model.domain.NumbersInStringsSanitizerTest
[INFO] Running uk.gov.pay.connector.common.model.api.ExternalRefundStatusMapTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.common.model.api.ExternalRefundStatusMapTest
[INFO] Running uk.gov.pay.connector.queue.payout.PayoutReconcileQueueTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s - in uk.gov.pay.connector.queue.payout.PayoutReconcileQueueTest
[INFO] Running uk.gov.pay.connector.queue.StateTransitionQueueTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.301 s - in uk.gov.pay.connector.queue.StateTransitionQueueTest
[INFO] Running uk.gov.pay.connector.queue.CaptureQueueTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s - in uk.gov.pay.connector.queue.CaptureQueueTest
[INFO] Running uk.gov.pay.connector.queue.StateTransitionServiceTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 s - in uk.gov.pay.connector.queue.StateTransitionServiceTest
[INFO] Running uk.gov.pay.connector.queue.sqs.SqsQueueServiceTest
ERROR [2023-01-13 13:51:02,119] uk.gov.pay.connector.queue.sqs.SqsQueueService: Failed sending message to SQS queue - null (Service: null; Status Code: 0; Error Code: null; Request ID: null)
ERROR [2023-01-13 13:51:02,120] uk.gov.pay.connector.queue.sqs.SqsQueueService: Failed to receive messages from SQS queue - null (Service: null; Status Code: 0; Error Code: null; Request ID: null)
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.038 s - in uk.gov.pay.connector.queue.sqs.SqsQueueServiceTest
[INFO] Running uk.gov.pay.connector.wallets.applepay.ApplePayServiceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 s - in uk.gov.pay.connector.wallets.applepay.ApplePayServiceTest
[INFO] Running uk.gov.pay.connector.wallets.googlepay.api.GooglePayAuthRequestTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.wallets.googlepay.api.GooglePayAuthRequestTest
[INFO] Running uk.gov.pay.connector.wallets.googlepay.GooglePayServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s - in uk.gov.pay.connector.wallets.googlepay.GooglePayServiceTest
[INFO] Running uk.gov.pay.connector.wallets.WalletAuthoriseServiceForGooglePay3dsTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s - in uk.gov.pay.connector.wallets.WalletAuthoriseServiceForGooglePay3dsTest
[INFO] Running uk.gov.pay.connector.wallets.WalletAuthoriseServiceTest
ERROR [2023-01-13 13:51:02,167] uk.gov.pay.connector.wallets.WalletAuthoriseService: Error occurred authorising charge. Charge external id: 6g2d4jl72bpnbulk6hth3v1p4l; message: Mock for WorldpayOrderStatusResponse, hashCode: 565341878
WARN  [2023-01-13 13:51:02,167] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=6g2d4jl72bpnbulk6hth3v1p4l
WARN  [2023-01-13 13:51:02,169] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state CREATED cannot proceed to AUTHORISATION READY [charge_external_id=r9pfrc4rmdjbr5mfaia4kbdpkq, charge_status=AUTHORISATION READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
WARN  [2023-01-13 13:51:02,186] uk.gov.pay.connector.charge.model.domain.ChargeEntity: Charge with state AUTHORISATION READY cannot proceed to AUTHORISATION READY [charge_external_id=l4r2iglkkl6lkh1v59siuk6nn2, charge_status=AUTHORISATION READY, event=Event{resourceExternalId='null', eventDetails=uk.gov.pay.connector.events.eventdetails.EmptyEventDetails, timestamp=null}]
ERROR [2023-01-13 13:51:02,190] uk.gov.pay.connector.wallets.WalletAuthoriseService: Error occurred authorising charge. Charge external id: 864buln9t6dbt39pa0i1qn7926; message: Malformed response received
ERROR [2023-01-13 13:51:02,190] uk.gov.pay.connector.wallets.WalletAuthoriseService: Response from gateway: null
WARN  [2023-01-13 13:51:02,191] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=864buln9t6dbt39pa0i1qn7926
ERROR [2023-01-13 13:51:02,200] uk.gov.pay.connector.wallets.WalletAuthoriseService: Error occurred authorising charge. Charge external id: kalm1bq8bhs651p23plvf4g5b4; message: Mock for WorldpayOrderStatusResponse, hashCode: 1337361504
WARN  [2023-01-13 13:51:02,200] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=kalm1bq8bhs651p23plvf4g5b4
ERROR [2023-01-13 13:51:02,207] uk.gov.pay.connector.wallets.WalletAuthoriseService: Error occurred authorising charge. Charge external id: g038514bj9m6gs7f7hcmgcsbk9; message: Connection timed out
WARN  [2023-01-13 13:51:02,208] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=g038514bj9m6gs7f7hcmgcsbk9
ERROR [2023-01-13 13:51:02,214] uk.gov.pay.connector.wallets.WalletAuthoriseService: Error occurred authorising charge. Charge external id: u4145k0hra9lb5jph4ikeki4hs; message: Mock for WorldpayOrderStatusResponse, hashCode: 1232512829
WARN  [2023-01-13 13:51:02,214] uk.gov.pay.connector.paymentprocessor.service.AuthorisationService: AuthCardDetails authorisation response received with no transaction id. -  charge_external_id=u4145k0hra9lb5jph4ikeki4hs
[INFO] Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.059 s - in uk.gov.pay.connector.wallets.WalletAuthoriseServiceTest
[INFO] Running uk.gov.pay.connector.tasks.service.ChargeParityCheckerTest
[INFO] Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.022 s - in uk.gov.pay.connector.tasks.service.ChargeParityCheckerTest
[INFO] Running uk.gov.pay.connector.tasks.service.RefundParityCheckerTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 s - in uk.gov.pay.connector.tasks.service.RefundParityCheckerTest
[INFO] Running uk.gov.pay.connector.tasks.ParityCheckServiceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s - in uk.gov.pay.connector.tasks.ParityCheckServiceTest
[INFO] Running uk.gov.pay.connector.usernotification.model.NotificationsTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.usernotification.model.NotificationsTest
[INFO] Running uk.gov.pay.connector.usernotification.model.EvaluatedChargeStatusNotificationTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.usernotification.model.EvaluatedChargeStatusNotificationTest
[INFO] Running uk.gov.pay.connector.usernotification.model.EvaluatedRefundStatusNotificationTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in uk.gov.pay.connector.usernotification.model.EvaluatedRefundStatusNotificationTest
[INFO] Running uk.gov.pay.connector.usernotification.service.UserNotificationServiceTest
WARN  [2023-01-13 13:51:02,302] uk.gov.pay.connector.usernotification.service.UserNotificationService: Email notifications is disabled by configuration
ERROR [2023-01-13 13:51:02,322] uk.gov.pay.connector.usernotification.service.UserNotificationService: Failed to send PAYMENT_CONFIRMED email - charge_external_id=ugfff46f8d98rob3tiinr585gf
! uk.gov.service.notify.NotificationClientException: null
WARN  [2023-01-13 13:51:02,348] uk.gov.pay.connector.usernotification.service.UserNotificationService: Cannot send email for charge_external_id = ukd31fkcpdhp9p243asuhke089 because the charge does not have an email address
ERROR [2023-01-13 13:51:02,363] uk.gov.pay.connector.usernotification.service.UserNotificationService: Failed to send REFUND_ISSUED email - charge_external_id=mmlpn8vj6rapfq9tinnt73r9ld
! uk.gov.service.notify.NotificationClientException: null
WARN  [2023-01-13 13:51:02,368] uk.gov.pay.connector.usernotification.service.UserNotificationService: Email notifications is disabled by configuration
[INFO] Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.103 s - in uk.gov.pay.connector.usernotification.service.UserNotificationServiceTest
[INFO] Running uk.gov.pay.connector.usernotification.service.GatewayAccountNotificationCredentialsServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 s - in uk.gov.pay.connector.usernotification.service.GatewayAccountNotificationCredentialsServiceTest
[INFO] Running uk.gov.pay.connector.usernotification.service.UserNotificationServiceEmailCollectionModeTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 s - in uk.gov.pay.connector.usernotification.service.UserNotificationServiceEmailCollectionModeTest
[INFO] Running uk.gov.pay.connector.resources.PerformanceReportResourceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 s - in uk.gov.pay.connector.resources.PerformanceReportResourceTest
[INFO] Running uk.gov.pay.connector.resources.ApiValidatorsTest
[INFO] Tests run: 23, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 s - in uk.gov.pay.connector.resources.ApiValidatorsTest
[INFO] Running uk.gov.pay.connector.resources.AuthCardDetailsValidatorTest
[INFO] Tests run: 52, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.02 s - in uk.gov.pay.connector.resources.AuthCardDetailsValidatorTest
[INFO] Running uk.gov.pay.connector.resources.GatewayAccountPerformanceReportResourceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s - in uk.gov.pay.connector.resources.GatewayAccountPerformanceReportResourceTest
[INFO] Running uk.gov.pay.connector.it.util.XMLUnmarshallerTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.309 s - in uk.gov.pay.connector.it.util.XMLUnmarshallerTest
[INFO] Running uk.gov.pay.connector.it.resources.PayersCardTypesResourceITest
[WARNING] Tests run: 6, Failures: 0, Errors: 0, Skipped: 5, Time elapsed: 0.072 s - in uk.gov.pay.connector.it.resources.PayersCardTypesResourceITest
[INFO] Running uk.gov.pay.connector.healthcheck.PingTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s - in uk.gov.pay.connector.healthcheck.PingTest
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   WorldpayWalletAuthorisationHandlerTest.shouldSendGooglePay3dsRequestWithEmailWhenSendingPayerEmailToGatewayEnabledAndPayerEmailNotPresent:295  Connect
[INFO] 
[ERROR] Tests run: 1780, Failures: 0, Errors: 1, Skipped: 7
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:38 min
[INFO] Finished at: 2023-01-13T13:51:02Z
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M5:test (default-test) on project pay-connector: There are test failures.
[ERROR] 
[ERROR] Please refer to /home/gabsko/breaking-updates/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
